PROTO_0:
  GETIMPORT R2 K2 [utf8.len]
  MOVE R3 R0
  CALL R2 1 1
  FASTCALL1 STRING_LEN R0 [+3]
  MOVE R4 R0
  GETIMPORT R3 K4 [string.len]
  CALL R3 1 1
  JUMPIFNOTEQ R2 R3 [+5]
  MOVE R2 R1
  MOVE R3 R0
  CALL R2 1 -1
  RETURN R2 -1
  GETIMPORT R2 K6 [utf8.codes]
  MOVE R3 R0
  CALL R2 1 3
  FORGPREP R2
  GETIMPORT R8 K8 [utf8.char]
  MOVE R9 R6
  CALL R8 1 1
  FASTCALL1 STRING_LEN R8 [+2]
  GETIMPORT R7 K4 [string.len]
  CALL R7 1 1
  JUMPIFNOTEQKN R7 K9 [1] [+8]
  MOVE R7 R1
  GETIMPORT R8 K11 [utf8.nfdnormalize]
  MOVE R9 R0
  CALL R8 1 -1
  CALL R7 -1 -1
  RETURN R7 -1
  FORGLOOP R2 2 [-18]
  RETURN R0 1

PROTO_1:
  GETUPVAL R1 0
  MOVE R2 R0
  GETIMPORT R3 K2 [string.upper]
  CALL R1 2 -1
  RETURN R1 -1

PROTO_2:
  GETUPVAL R1 0
  MOVE R2 R0
  GETIMPORT R3 K2 [string.lower]
  CALL R1 2 -1
  RETURN R1 -1

MAIN:
  PREPVARARGS 0
  NEWTABLE R0 2 0
  DUPCLOSURE R1 K0 [PROTO_0]
  DUPCLOSURE R2 K1 [PROTO_1]
  CAPTURE VAL R1
  SETTABLEKS R2 R0 K2 ["upper"]
  DUPCLOSURE R2 K3 [PROTO_2]
  CAPTURE VAL R1
  SETTABLEKS R2 R0 K4 ["lower"]
  RETURN R0 1
